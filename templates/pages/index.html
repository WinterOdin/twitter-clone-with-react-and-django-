{% extends 'base.html'  %}
{% block content %}


<div id='tweets'>

</div>



<script>
const tweetsElement = document.getElementById('tweets')


const xhr = new XMLHttpRequest()
const method = 'GET'
const url = '/tweetList'
const responseTyp = "json"

function formatedTweetsElement(tweet){
    var formatedTweet =   tweet.id + "<p>" + tweet.content + "</p>"
    return formatedTweet
}

xhr.responseType = responseTyp
xhr.open(method, url)
xhr.onload = function(){
    console.log(xhr.response)
    const serverResponse = xhr.response
    var listedItems = serverResponse.response
    var finalTweet  = ""
    var i;
    for (i = 0; i < listedItems.length; i++){
        var tweetObj = listedItems[i]
        var currItem = formatedTweetsElement(tweetObj)
            finalTweet += currItem
    }
    tweetsElement.innerHTML = finalTweet
}
xhr.send()

</script>

{% endblock  %}